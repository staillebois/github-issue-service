[{"title":"Native image ignores timezone at runtime even with quarkus.native.enable-all-timezones=true","author":"am36166","url":"https://github.com/quarkusio/quarkus/issues/51211","description":"### Describe the bug\n\nHi Quarkus team ,\nIâ€™m running into a persistent timezone issue with Quarkus Native .\nEven when setting:\nquarkus.native.enable-all-timezones=true\nquarkus.default-time-zone=Africa/Casablanca\nenvironment variable TZ=Africa/Casablanca\nruntime flag -Duser.timezone=Africa/Casablanca\nvalid /etc/localtime inside the container\ntzdata present in the final image\nthe native executable always runs in UTC, ignoring all timezone configuration.\n\n<img width=\"791\" height=\"130\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/559d0cad-a3b0-4bc7-a9b5-642c28e68ec4\" />\n\nThe screenshot above illustrates the problem inside the running pod: the native application is always 1 hour behind the correct local time, even though the node, the container environment, and other JVM-based services are using the correct Africa/Casablanca timezone.\n\nDockerfile :\n\nFROM registry.access.redhat.com/ubi8/ubi-minimal\nARG module=\"library\"\nWORKDIR /work/\n\n# Copy the Quarkus native executable\nCOPY services/${module}/target/*-runner /work/application\n\n# Install shadow-utils + tzdata and configure permissions\nRUN microdnf install -y shadow-utils tzdata tzdata-java && \\\n    # Set timezone to Africa/Casablanca\n    ln -sf /usr/share/zoneinfo/Africa/Casablanca /etc/localtime && \\\n    echo \"Africa/Casablanca\" > /etc/timezone && \\\n    chmod 775 /work && \\\n    useradd -u 1000 -r -g 0 -d /work -s /sbin/nologin appuser && \\\n    chown -R appuser:0 /work && \\\n    microdnf clean all\n\nENV TZ=Africa/Casablanca\n\nUSER appuser\n\n# Start application\nCMD [\"./application\", \"-Dquarkus.http.host=0.0.0.0\"]\n\nthe build was done via :\n./mvnw clean install -Pnative -DskipTests\n            -pl ${MODULES}services/common,components/framework,components/model,components/utilities,components/enumeration,components/bean\n            -Dquarkus.container-image.build=false\n            -Dquarkus.native.remote-container-build=true\n            -Dquarkus.container-image.push=false\n            -Dquarkus.docker.buildx.platform=linux/amd64\n            -Dquarkus.native.native-image-xmx=14G\n            -Dquarkus.native.builder-image=quay.io/quarkus/ubi-quarkus-mandrel-builder-image:jdk-21\n            -Dquarkus.native.enable-all-timezones=true\n            -Duser.timezone=Africa/Casablanca\n            -Dquarkus.profile=$PROFILE\n\nAny guidance or fix would be greatly appreciated\nThank you in advance\n\n### Expected behavior\n\nthe native binary should:\nembed correct tzdata\nrespect the configured timezone\nor at least honor -Duser.timezone at runtime\n\n### Actual behavior\n\nThe result is a native image that always uses GMT/UTC regardless of configuration.\n\n### How to Reproduce?\n\n_No response_\n\n### Output of `uname -a` or `ver`\n\n_No response_\n\n### Output of `java -version`\n\n21\n\n### Mandrel or GraalVM version (if different from Java)\n\n_No response_\n\n### Quarkus version or git rev\n\n3.21.2\n\n### Build tool (ie. output of `mvnw --version` or `gradlew --version`)\n\n3.9.9\n\n### Additional information\n\n_No response_","comments":[{"author":"quarkus-bot[bot]","body":"/cc @Karm (native-image), @edeandrea (container-image), @galderz (native-image), @geoand (container-image), @zakkak (native-image)","date":"2025-11-24T16:16:06.000+00:00"}],"number":51211}]